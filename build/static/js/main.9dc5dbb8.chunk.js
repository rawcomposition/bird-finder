(this.webpackJsonpplayground=this.webpackJsonpplayground||[]).push([[0],{19:function(e,t,a){e.exports=a(43)},24:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(10),o=a.n(c),l=(a(24),a(8)),s=(a(25),a(26),a(3)),i=a(4),u=a(5),m=a(6),d=a(7),f=(a(27),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"masthead"},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-lg-7 my-auto"},r.a.createElement("div",{className:"header-content mx-auto"},r.a.createElement("h1",{className:"mb-5"},"Find your target birds - the easy way"))),r.a.createElement("div",{className:"col-lg-5 my-auto"}))))}}]),t}(n.Component));a(28);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var g=r.a.createElement("path",{fill:"currentColor",d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z",className:""}),E=function(e){var t=e.svgRef,a=e.title,n=p(e,["svgRef","title"]);return r.a.createElement("svg",h({focusable:"false",role:"img",viewBox:"0 0 512 512",ref:t},n),a?r.a.createElement("title",null,a):null,g)},v=r.a.forwardRef((function(e,t){return r.a.createElement(E,h({svgRef:t},e))})),b=(a.p,function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"footer-banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Bird smarter, not harder ",r.a.createElement(v,{className:"birdy"})))),r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"\xa9 2017 Adam Jackson. All Rights Reserved.",r.a.createElement("br",null),"mail@rawcomposition.com"))))}),O=a(2),j=a(12),N=(a(29),a(30),a(13)),y=a.n(N),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState({address:e}),a.props.handleChange(e)},a.handleSelect=function(e){a.setState({address:e}),Object(N.geocodeByAddress)(e).then((function(e){return Object(N.getLatLng)(e[0])})).then((function(t){a.props.handleChange(Object(j.a)({},t,{address:e}))})).catch((function(e){return console.error("Error",e)}))},a.state={address:"",lat:"",lng:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",t({placeholder:"Search for a place or address",className:"form-control form-control-lg location-search-input"})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},a.map((function(e){var t=e.formattedSuggestion,a=t.mainText,c=t.secondaryText,o="suggestion-item"+(e.active?" active":"");return r.a.createElement("div",n(e,{className:o}),r.a.createElement("strong",null,a),r.a.createElement("span",{className:"secondary-text"},c))}))))}))}}]),t}(r.a.Component),S=(a(38),a(18)),k=a(17),C=a.n(k),x=function(e){var t=e.handleChange,a=C()((function(e){return n(e)}),300),n=function(e){return fetch("https://api.ebird.org/v2/ref/taxon/find?locale=en_US&cat=species&key=jfekjedvescr&q="+e).then((function(e){return e.json()})).then((function(e){return new Promise((function(t,a){t(e.map((function(e){return{label:e.name,value:e.code}})))}))})).catch((function(e){alert("error")}))};return r.a.createElement(S.a,{loadOptions:function(e){return a(e)},onChange:t,placeholder:"Search for a species...",className:"species-select"})},P=function(e){var t=e.handleFind,a=Object(n.useState)({speciesLabel:"",speciesCode:"",address:"",radius:10,lat:"",lng:""}),c=Object(l.a)(a,2),o=c[0],s=c[1];return r.a.createElement("form",{className:"finder-form",onSubmit:function(e){return e.preventDefault(),o.speciesCode?o.lat?void t(o):alert("Please choose a location or address"):alert("Please choose a species")}},r.a.createElement(x,{handleChange:function(e){var t=e.label,a=e.value;s(Object(j.a)({},o,{speciesLabel:t,speciesCode:a}))}}),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-md-6 mt-2"},r.a.createElement(w,{handleChange:function(e){var t=e.address,a=e.lat,n=e.lng;s(Object(j.a)({},o,{address:t,lat:a,lng:n}))}})),r.a.createElement("div",{className:"col-md-4 input-group input-group-lg mt-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Radius (km)")),r.a.createElement("input",{type:"text",name:"radius",required:!0,className:"form-control",onChange:function(e){var t=e.target,a=t.name,n=t.value;s(Object(j.a)({},o,Object(O.a)({},a,n)))},value:o.radius})),r.a.createElement("div",{className:"col-md-2 mt-2"},r.a.createElement("button",{type:"submit",className:"btn find-btn btn-primary mb-2 pl-3 pr-3"},"Find"))))},F=(a(39),a(40),function(){return r.a.createElement("div",{className:"loader"},"Loading...")}),R=(a(41),function(e){var t=e.location_id,a=e.average,n=e.total_checklists,c=e.location_name;return r.a.createElement("li",{className:"row",key:t},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("a",{href:"https://ebird.org/hotspot/".concat(t),target:"_blank",rel:"noopener noreferrer"},c)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("b",{className:"percent text-muted"},a,"%")," of ",n," checklists",r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(a,"%")}}))))}),_=(a(42),function(e){var t=e.message;return r.a.createElement("div",{className:"alert alert-warning error"},t)}),B=function(e){var t=e.speciesCode,a=e.lat,c=e.lng,o=e.radius,s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),h=f[0],p=f[1],g=Object(n.useState)(!1),E=Object(l.a)(g,2),v=E[0],b=E[1],O=Object(n.useState)(!1),j=Object(l.a)(O,2),N=j[0],y=j[1];return Object(n.useEffect)((function(){t&&a&&c&&o&&(p(!0),m([]),b(!1),y(!1),fetch("/api/?code=".concat(t,"&lat=").concat(a,"&lng=").concat(c,"&distance=").concat(o)).then((function(e){return function(e){return e.ok?e.json().catch((function(e){throw new Error("Oops. Something bad happened.")})):e.json().catch((function(e){throw new Error("Oops. Something bad happened.")})).then((function(e){throw new Error(e.message)}))}(e)})).then((function(e){p(!1),m(e),e.length||y(!0)})).catch((function(e){console.log(e);var t=e.message||"Oops. An error occured";b(t),p(!1)})))}),[t,a,c,o]),r.a.createElement("div",{className:"results-container"},h?r.a.createElement(F,null):"",v?r.a.createElement(_,{message:v}):"",N?r.a.createElement("p",{className:"no-results"},"We couldn't find any hotspots. Try a different location or larger radius."):"",r.a.createElement("ol",{className:"hotspot-results"},u.map((function(e){return r.a.createElement(R,Object.assign({key:e.location_id},e))}))))},L=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"section-heading text-center"},r.a.createElement("h2",null,"Find a bird"),r.a.createElement("hr",null)),r.a.createElement(P,{handleFind:function(e){c(e)}}),r.a.createElement(B,a))),r.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.9dc5dbb8.chunk.js.map